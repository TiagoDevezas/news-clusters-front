webpackJsonp([0],[,,function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a(4),n=a(14),r=a.n(n),i=a(10),l=a(13),o=a.n(l),u=a(12),c=(a.n(u),a(11));a.n(c);a.d(t,"eventBus",function(){return d});var d=new s.a;s.a.use(o.a),new s.a({el:"#app",router:i.a,render:function(e){return e(r.a)}})},,,,,,,,function(e,t,a){"use strict";var s=a(4),n=a(65),r=a(56),i=a.n(r);s.a.use(n.a),t.a=new n.a({routes:[{path:"/",name:"MainView",component:i.a}]})},function(e,t){},function(e,t){},,function(e,t,a){a(47);var s=a(1)(a(34),a(63),null,null);e.exports=s.exports},,,,,,,,,,,,,,,,,,,function(e,t,a){"use strict";function s(e){return r.a.get(i,{params:e})}var n=a(15),r=a.n(n);t.a=s;var i="http://irlab.fe.up.pt/p/mediaviz/api/clusters"},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"app"}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={data:function(){return{pickerOpts:{defaultDate:this.$route.query.day?this.$route.query.day:(new Date).toISOString().slice(0,10),minDate:"2014-12-05",maxDate:(new Date).toISOString().slice(0,10),onChange:function(e,t,a){t!==this.$route.query.day&&this.setRouteQuery(t)}.bind(this),locale:{weekdays:{shorthand:["Dom","Seg","Ter","Qua","Qui","Sex","Sáb"],longhand:["Domingo","Segunda-feira","Terça-feira","Quarta-feira","Quinta-feira","Sexta-feira","Sábado"]},months:{shorthand:["Jan","Fev","Mar","Abr","Mai","Jun","Jul","Ago","Set","Out","Nov","Dez"],longhand:["Janeiro","Fevereiro","Março","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"]},rangeSeparator:" até "}}}},methods:{setRouteQuery:function(e){this.$router.push({query:{day:e}})}}}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a(2);t.default={props:{itemLabels:{type:Array}},data:function(){return{selectedLabel:"",sortParams:"",open:!1}},methods:{setDefaultLabel:function(){this.selectedLabel?this.selectedLabel:this.selectedLabel=this.itemLabels[0].label},toggleDropdown:function(){this.open=!this.open},selectLabel:function(e,t){e!==this.selectedLabel&&(this.selectedLabel=e,this.sortParams=t,s.eventBus.$emit("sortClusters",this.sortParams)),this.toggleDropdown()}},mounted:function(){this.setDefaultLabel()}}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a(53),n=a.n(s),r=a(54),i=a.n(r);t.default={props:{items:{type:Array},labels:{type:Array}},components:{ItemMain:n.a,ItemRelated:i.a},computed:{mainItem:function(){return this.items[0]},relatedItems:function(){return this.items.slice(1,this.items.length)}}}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={props:{itemMainData:{type:Object}},computed:{truncateSummary:function(){var e=this.itemMainData.summary;return e<=140?e+" ...":e.substr(0,e.lastIndexOf(" ",140))+" ..."},formatDate:function(){return this.itemMainData.pub_date.slice(0,10)+" - "+this.itemMainData.pub_date.slice(11,16)}}}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={props:{itemRelatedData:{type:Array}}}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a(2);t.default={props:{labels:{type:Array}},data:function(){return{selectedLabel:"",labelClicked:!1}},methods:{filterClusters:function(e){this.selectedLabel=this.selectedLabel!==e?e:"",this.labelClicked=this.selectedLabel===e,s.eventBus.$emit("labelClicked",this.selectedLabel)}}}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a(33),n=a(2),r=a(52),i=a.n(r),l=a(50),o=a.n(l),u=a(55),c=a.n(u),d=a(51),f=a.n(d);t.default={components:{ItemCluster:i.a,DatePicker:o.a,LabelList:c.a,DropdownSorter:f.a},data:function(){return{clusters:[],filteredClusters:[],labels:[],loading:!0,dropdownLabels:[{label:"Pontuação: mais alta",sort:["score","desc"]},{label:"Pontuação: mais baixa",sort:["score","asc"]},{label:"Data: mais recente",sort:["date","desc"]},{label:"Data: mais antiga",sort:["date","asc"]}]}},mounted:function(){var e=this;this.fetchData(),n.eventBus.$on("labelClicked",function(t){e.showClusterForLabel(t)}),n.eventBus.$on("sortClusters",function(t){e.sortClusters(t)})},watch:{"$route.query":"fetchData"},methods:{fetchData:function(){var e=this;this.loading=!0,a.i(s.a)(this.$route.query).then(function(t){e.clusters=t.data.clusters.filter(function(e){return e.labels[0].split(" ").length>1}),e.filteredClusters=e.clusters,e.labels=e.getLabelsFromClusters(e.clusters),e.loading=!1}).catch(function(t){e.loading=!1,console.log(t)})},sortClusters:function(e){var t=e[0],a=e[1];this.clusters.sort(function(e,s){return"score"===t?"asc"===a?e.score-s.score:s.score-e.score:"date"===t?"asc"===a?Date.parse(e.latest_date)-Date.parse(s.latest_date):Date.parse(s.latest_date)-Date.parse(e.latest_date):void 0})},getLabelsFromClusters:function(e){return[].concat.apply([],e.map(function(e){return e.labels}))},showClusterForLabel:function(e){e.length?this.filteredClusters=this.clusters.filter(function(t){return t.labels[0]===e}):this.filteredClusters=this.clusters}}}},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},,function(e,t,a){a(48);var s=a(1)(a(35),a(64),"data-v-f4b51cbc",null);e.exports=s.exports},function(e,t,a){a(42);var s=a(1)(a(36),a(57),"data-v-0a6579fc",null);e.exports=s.exports},function(e,t,a){a(43);var s=a(1)(a(37),a(58),"data-v-10a7e5de",null);e.exports=s.exports},function(e,t,a){a(45);var s=a(1)(a(38),a(61),"data-v-742766b2",null);e.exports=s.exports},function(e,t,a){a(46);var s=a(1)(a(39),a(62),"data-v-7e0e16c2",null);e.exports=s.exports},function(e,t,a){var s=a(1)(a(40),a(60),null,null);e.exports=s.exports},function(e,t,a){a(44);var s=a(1)(a(41),a(59),"data-v-3bf81462",null);e.exports=s.exports},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{class:[{active:e.open},"dropdown"]},[a("a",{staticClass:"btn btn-primary",on:{click:function(t){t.preventDefault(),e.toggleDropdown(t)}}},[e._v("\n    "+e._s(e.selectedLabel)+" "),a("i",{staticClass:"icon-caret"})]),e._v(" "),a("ul",{class:[{hide:!e.open},"menu"]},e._l(e.itemLabels,function(t){return a("li",{staticClass:"menu-item"},[a("a",{class:[t.label===e.selectedLabel?"active":""],attrs:{href:"#"},on:{click:function(a){a.preventDefault(),e.selectLabel(t.label,t.sort)}}},[e._v(e._s(t.label))])])}))])},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"cluster"},[a("item-main",{attrs:{"item-main-data":e.mainItem}}),e._v(" "),a("item-related",{attrs:{"item-related-data":e.relatedItems}}),e._v(" "),a("div",{staticClass:"line-separator"})],1)},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container-main"},[a("div",{staticClass:"clusters"},[a("div",{staticClass:"container grid-980"},[a("div",{staticClass:"columns"},[a("label-list",{directives:[{name:"show",rawName:"v-show",value:!e.loading,expression:"!loading"}],attrs:{labels:e.labels}}),e._v(" "),a("div",{staticClass:"column col-8 col-sm-12"},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.loading,expression:"loading"}],staticClass:"loading-overlay"},[e._v("A criar página...")]),e._v(" "),e.loading?e._e():a("h1",[e._v("As principais notícias de "),a("date-picker")],1),e._v(" "),a("dropdown-sorter",{directives:[{name:"show",rawName:"v-show",value:!e.loading,expression:"!loading"}],attrs:{"item-labels":e.dropdownLabels}}),e._v(" "),e._l(e.filteredClusters,function(t){return a("item-cluster",{directives:[{name:"show",rawName:"v-show",value:!e.loading,expression:"!loading"}],attrs:{items:t.items,labels:t.labels}})})],2)],1)])])])},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"column col-4 col-sm-12"},[a("ul",{staticClass:"menu"},[e._m(0),e._v(" "),a("li",{staticClass:"divider"}),e._v(" "),e._l(e.labels,function(t){return a("li",{staticClass:"menu-item"},[a("a",{class:[e.selectedLabel===t&&e.labelClicked?"active":""],attrs:{href:"#"},on:{click:function(a){a.preventDefault(),e.filterClusters(t)}}},[e._v(e._s(t))])])})],2)])},staticRenderFns:[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("li",{staticClass:"menu-item"},[a("strong",[e._v("Tópicos")])])}]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"item-main"},[a("div",{staticClass:"item-main-source"},[e._v(e._s(e.itemMainData.source_name)+" - "+e._s(e.formatDate))]),e._v(" "),a("h1",[a("a",{attrs:{href:e.itemMainData.url}},[a("span",{domProps:{innerHTML:e._s(e.itemMainData.title)}})])]),e._v(" "),a("div",{staticClass:"item-main-summary",domProps:{innerHTML:e._s(e.truncateSummary)}})])},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"item-related"},[a("span",[e._v("Mais: ")]),e._v(" "),e._l(e.itemRelatedData,function(t,s){return a("span",[a("a",{attrs:{href:t.url,title:t.title.trim()+" - "+t.pub_date}},[e._v(e._s(t.source_name))]),e._v(e._s(s<e.itemRelatedData.length-1?", ":"")+"\n  ")])})],2)},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("router-view")],1)},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("span",{staticClass:"date-picker"},[a("Flatpickr",{attrs:{options:e.pickerOpts}})],1)},staticRenderFns:[]}}],[2]);
//# sourceMappingURL=app.6ee446671b2e0c567daa.js.map